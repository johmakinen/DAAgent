name: "MyDataBase"
description: "A database containing multiple data sources including Iris flower measurements, Finnish postal code income data, and postal code apartment size data."

tables:
  - name: "iris"
    description: "Contains measurements of iris flowers including sepal and petal dimensions, along with species classification."
    columns:
      - name: "id"
        type: "INTEGER"
        description: "Unique identifier for each record"
        example_values: ["1", "2", "3"]
      - name: "sepal_length"
        type: "REAL"
        description: "Length of the sepal (outer part of the flower) in centimeters"
        example_values: ["5.1", "4.9", "6.2"]
      - name: "sepal_width"
        type: "REAL"
        description: "Width of the sepal (outer part of the flower) in centimeters"
        example_values: ["3.5", "3.0", "3.4"]
      - name: "petal_length"
        type: "REAL"
        description: "Length of the petal (inner part of the flower) in centimeters"
        example_values: ["1.4", "1.3", "4.7"]
      - name: "petal_width"
        type: "REAL"
        description: "Width of the petal (inner part of the flower) in centimeters"
        example_values: ["0.2", "0.3", "1.5"]
      - name: "species"
        type: "TEXT"
        description: "Species of iris flower: 'setosa', 'versicolor', or 'virginica'"
        example_values: ["setosa", "versicolor", "virginica"]
    example_queries:
      - "SELECT AVG(petal_length) FROM iris GROUP BY species"
      - "SELECT species, COUNT(*) FROM iris GROUP BY species"
      - "SELECT MAX(sepal_width), MIN(sepal_width) FROM iris WHERE species = 'setosa'"
      - "SELECT * FROM iris WHERE petal_length > 5.0 ORDER BY sepal_length DESC"
  
  - name: "postal_code_income"
    description: "Contains income data for Finnish postal code areas across multiple years in long format. Each row represents a postal code area for a specific year, with the income value stored in the value column."
    columns:
      - name: "postal_code"
        type: "TEXT"
        description: "Postal code identifier (e.g., '00100', '00120')"
        example_values: ["00100", "00120", "00200"]
      - name: "postal_area"
        type: "TEXT"
        description: "Full name of the postal area (e.g., 'Helsinki keskusta - Etu-Töölö', 'Punavuori - Bulevardi')"
        example_values: ["Helsinki keskusta - Etu-Töölö", "Punavuori - Bulevardi", "KOKO MAA"]
      - name: "year"
        type: "TEXT"
        description: "Year for which the income data is recorded"
        example_values: ["2010", "2011", "2012", "2020", "2021"]
      - name: "value"
        type: "REAL"
        description: "Income value for the postal code area in the specified year"
        example_values: ["14875", "15204", "15521", "4290980"]
      - name: "created_at"
        type: "TIMESTAMP"
        description: "Timestamp when the record was created"
        example_values: ["2024-01-01 12:00:00"]
    example_queries:
      - "SELECT postal_code, postal_area, year, value FROM postal_code_income WHERE postal_code = '00100' ORDER BY year"
      - "SELECT postal_code, postal_area, year, value FROM postal_code_income WHERE year = '2020' ORDER BY value DESC LIMIT 10"
      - "SELECT postal_code, postal_area, MAX(value) - MIN(value) as income_change FROM postal_code_income WHERE postal_code = '00100' GROUP BY postal_code, postal_area"
      - "SELECT year, AVG(value) as avg_income FROM postal_code_income WHERE year IN ('2010', '2020') GROUP BY year"
      - "SELECT postal_code, postal_area, year, value FROM postal_code_income WHERE postal_area LIKE '%Helsinki%' AND year = '2020' ORDER BY value DESC"
  
  - name: "postal_code_apartment_m2"
    description: "Contains average apartment size (m²) data for Finnish postal code areas across multiple years in long format. Each row represents a postal code area for a specific year, with the average apartment size in square meters stored in the avg_m2 column."
    columns:
      - name: "postal_code"
        type: "TEXT"
        description: "Postal code identifier (e.g., '00100', '00120')"
        example_values: ["00100", "00120", "00200"]
      - name: "postal_area"
        type: "TEXT"
        description: "Full name of the postal area (e.g., 'Helsinki keskusta - Etu-Töölö', 'Punavuori - Bulevardi')"
        example_values: ["Helsinki keskusta - Etu-Töölö", "Punavuori - Bulevardi", "KOKO MAA"]
      - name: "year"
        type: "TEXT"
        description: "Year for which the apartment size data is recorded"
        example_values: ["2010", "2011", "2012", "2020", "2021"]
      - name: "avg_m2"
        type: "REAL"
        description: "Average apartment size in square meters (m²) for the postal code area in the specified year"
        example_values: ["45.2", "52.8", "61.3", "48.5"]
      - name: "created_at"
        type: "TIMESTAMP"
        description: "Timestamp when the record was created"
        example_values: ["2024-01-01 12:00:00"]
    example_queries:
      - "SELECT postal_code, postal_area, year, avg_m2 FROM postal_code_apartment_m2 WHERE postal_code = '00100' ORDER BY year"
      - "SELECT postal_code, postal_area, year, avg_m2 FROM postal_code_apartment_m2 WHERE year = '2020' ORDER BY avg_m2 DESC LIMIT 10"
      - "SELECT postal_code, postal_area, MAX(avg_m2) - MIN(avg_m2) as size_change FROM postal_code_apartment_m2 WHERE postal_code = '00100' GROUP BY postal_code, postal_area"
      - "SELECT year, AVG(avg_m2) as avg_apartment_size FROM postal_code_apartment_m2 WHERE year IN ('2010', '2020') GROUP BY year"
      - "SELECT postal_code, postal_area, year, avg_m2 FROM postal_code_apartment_m2 WHERE postal_area LIKE '%Helsinki%' AND year = '2020' ORDER BY avg_m2 DESC"
      - "SELECT pci.postal_code, pci.postal_area, pci.year, pci.value as income, pcm.avg_m2 FROM postal_code_income pci JOIN postal_code_apartment_m2 pcm ON pci.postal_code = pcm.postal_code AND pci.year = pcm.year WHERE pci.year = '2020' ORDER BY pci.value DESC LIMIT 10"

relationships:
  - from_table: "postal_code_income"
    to_table: "postal_code_apartment_m2"
    type: "many-to-many"
    description: "The postal_code_income and postal_code_apartment_m2 tables can be joined to combine income and apartment size data for the same postal code area and year. Both tables share postal_code and year as a composite key, allowing for temporal analysis of income and apartment size relationships."
    join_columns:
      - from_column: "postal_code"
        to_column: "postal_code"
        description: "Postal code identifier linking both tables"
      - from_column: "year"
        to_column: "year"
        description: "Year linking both tables for temporal matching"
    example_queries:
      - "SELECT pci.postal_code, pci.postal_area, pci.year, pci.value as income, pcm.avg_m2 FROM postal_code_income pci JOIN postal_code_apartment_m2 pcm ON pci.postal_code = pcm.postal_code AND pci.year = pcm.year WHERE pci.year = '2020' ORDER BY pci.value DESC LIMIT 10"
      - "SELECT pci.postal_code, pci.postal_area, pci.year, pci.value as income, pcm.avg_m2, (pci.value / pcm.avg_m2) as income_per_m2 FROM postal_code_income pci JOIN postal_code_apartment_m2 pcm ON pci.postal_code = pcm.postal_code AND pci.year = pcm.year WHERE pci.year = '2020' ORDER BY income_per_m2 DESC"
      - "SELECT pci.postal_code, pci.postal_area, pci.year, pci.value as income, pcm.avg_m2 FROM postal_code_income pci INNER JOIN postal_code_apartment_m2 pcm ON pci.postal_code = pcm.postal_code AND pci.year = pcm.year WHERE pci.postal_code = '00100' ORDER BY pci.year"